<!--
  Generated template for the Backlog page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-navbar>
        <ion-title>待办事项</ion-title>
    </ion-navbar>
    <ion-toolbar no-border-top>
        <ion-segment class="content-ios" [(ngModel)]="work">
            <ion-segment-button value="notDone">
                未办理
            </ion-segment-button>
            <ion-segment-button value="done">
                已办理
            </ion-segment-button>
        </ion-segment>
    </ion-toolbar>

</ion-header>


<ion-content>
    <div [ngSwitch]="work">
        <ion-refresher (ionRefresh)="doRefresh($event)">
            <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="下拉刷新" refreshingSpinner="circles" refreshingText="正在刷新...">
            </ion-refresher-content>
        </ion-refresher>

        <ion-list *ngSwitchCase="'notDone'">

            <button ion-item *ngFor="let work of items" [navPush]="nxPage" [navParams]="{id:work.Id}">
                <span>&nbsp;[{{work.Title}}]{{work.WorkNumber}}</span>
                <p>发起人：{{work.Originator}}&emsp;当前步骤：{{work.Step}}</p>
            </button>

        </ion-list>

        <ion-list *ngSwitchCase="'done'">
            <button ion-item *ngFor="let work of items" [navPush]="nxPage" [navParams]="{id:work.Id}">
                <span>&nbsp;[{{work.Title}}]{{work.WorkNumber}}</span>
                <p>发起人：{{work.Originator}}&emsp;当前步骤：{{work.Step}}</p>
            </button>
        </ion-list>

        <ion-infinite-scroll (ionInfinite)="$event.waitFor(doInfinite())" [enabled]="moredata" threshold="100px">
            <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="加载中..."></ion-infinite-scroll-content>
        </ion-infinite-scroll>

    </div>
</ion-content>