{"version":3,"sources":["../../src/pages/meeting/meeting-write/meeting-write.module.ts","../../src/pages/meeting/meeting_service.ts","../../src/pages/meeting/meeting-write/meeting-write.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MeetingWritePage } from './meeting-write';\nimport { MeetingService } from '../meeting_service';\n\n@NgModule({\n  declarations: [\n    MeetingWritePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MeetingWritePage),\n  ],\n  exports: [MeetingWritePage],\n  providers: [MeetingService] \n})\nexport class MeetingWritePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/meeting/meeting-write/meeting-write.module.ts","import { Injectable } from '@angular/core';\r\nimport { Response } from \"@angular/http\";\r\nimport 'rxjs/add/operator/map';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { HttpService } from \"../../providers/HttpService\";\r\n\r\n@Injectable()\r\nexport class MeetingService {\r\n    meetingStatus: object = {\r\n        Drafting: \"起草中\", // 起草中\r\n        Delivered: \"送审中\", // 送审中\r\n        Approved: \"已审批\", // 已审批\r\n        HasBeenReturned: \"已退回\", // 已退回\r\n        completed: \"已完成\", // 已完成\r\n    };\r\n\r\n    constructor(public httpService: HttpService) {\r\n    }\r\n\r\n    getList(param?): Observable<any>{\r\n        return this.httpService.postFormData(\"ashx/MeetLs.ashx\", param).map((res: Response) => res.json());\r\n    }\r\n\r\n    write(param): Observable<any>{\r\n        return this.httpService.postFormData(\"ashx/MeetAdd.ashx\", param).map((res: Response) => res.json());\r\n    }\r\n\r\n    read(param): Observable<any> {\r\n        return this.httpService.postFormData(\"ashx/MeetDetail.ashx\", param).map((res: Response) => res.json());\r\n    }\r\n\r\n    mod(param): Observable<any>  {\r\n        return this.httpService.postFormData(\"ashx/MeetMod.ashx\", param).map((res: Response) => res.json());\r\n    }\r\n\r\n    MeetPlaceLs(): Observable<any>{\r\n        return this.httpService.postFormData(\"ashx/MeetPlaceLs.ashx\", {}).map((res: Response) => res.json());\r\n    }\r\n\r\n    MeetTypeLs(): Observable<any>{\r\n        return this.httpService.postFormData(\"ashx/MeetTypeLs.ashx\", {}).map((res: Response) => res.json());\r\n    }\r\n\r\n    GetMeetingPlaceAndType(): Observable<any>{\r\n        let MeetPlaceLs = this.httpService.postFormData(\"ashx/MeetPlaceLs.ashx\", {}).map((res: Response) => res.json());\r\n        let MeetTypeLs = this.httpService.postFormData(\"ashx/MeetTypeLs.ashx\", {}).map((res: Response) => res.json());\r\n        return Observable.forkJoin([MeetPlaceLs, MeetTypeLs]);\r\n    }\r\n\r\n    GetDeptLs(): Observable<any>{\r\n        return this.httpService.postFormData(\"ashx/BmLs.ashx\", {}).map((res: Response) => res.json());\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/meeting/meeting_service.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\r\nimport { IonicPage, NavParams, NavController, PopoverController, ViewController } from 'ionic-angular';\r\n\r\nimport { GlobalData } from '../../../providers/GlobalData';\r\nimport { NativeService } from '../../../providers/NativeService';\r\nimport { FileObj } from \"../../../model/FileObj\";\r\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\r\nimport { FileService } from '../../../providers/FileService';\r\nimport { MeetingService } from '../meeting_service';\r\n\r\n/**\r\n * Generated class for the MeetingWritePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-meeting-write',\r\n  templateUrl: 'meeting-write.html',\r\n})\r\nexport class MeetingWritePage {\r\n  writeForm: FormGroup;\r\n  FileNewName: string = \"\"; // 附件名称\r\n  MeetPlaceLs = [];\r\n  MeetTypeLs = [];\r\n  DeptLs = [];\r\n  PersonId: string = \"\";\r\n  constructor(public navCtrl: NavController,\r\n              public navParams: NavParams,\r\n              private fileService: FileService,\r\n              private formBuilder: FormBuilder,\r\n              private globalData: GlobalData,\r\n              private popoverCtrl: PopoverController,\r\n              private nativeService: NativeService,\r\n              private meetingService: MeetingService) {\r\n    this.meetingService.MeetPlaceLs().subscribe((resJson) => {\r\n      if (resJson.Result)  this.MeetPlaceLs = resJson.Data;\r\n    });\r\n\r\n    this.meetingService.MeetTypeLs().subscribe((resJson) => {\r\n      if (resJson.Result)  this.MeetTypeLs = resJson.Data;\r\n    });\r\n\r\n    this.meetingService.GetDeptLs().subscribe((resJson) => {\r\n      if (resJson.Result)  this.DeptLs = resJson.Data;\r\n    });\r\n\r\n    this.writeForm = this.formBuilder.group({\r\n        Title: ['', [Validators.required, Validators.maxLength(30), Validators.maxLength(2)]], // 第一个参数是默认值\r\n        TypeId: [\"\", [Validators.required]],\r\n        PlaceId: [\"\", [ Validators.required]],\r\n        StartDate: [\"\", [ Validators.required]],\r\n        EndDate: [\"\", [Validators.required]],\r\n        Person: [\"\", [Validators.maxLength(180), Validators.required]],\r\n        DeptId: [\"\", []],\r\n        HostName: [\"\", [Validators.maxLength(20)]],\r\n        Range: [\"\", [Validators.maxLength(180)]],\r\n        Detail: [\"\", [Validators.maxLength(180)]],\r\n        FileOldName: [\"\", [Validators.maxLength(180)]],\r\n    });\r\n\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad MeetingWritePage');\r\n  }\r\n  sent(data){\r\n    data.Person = null;\r\n    data.Uid = this.globalData.Uid;\r\n    data.FileNewName = this.FileNewName;\r\n    data.PersonId = this.PersonId;\r\n    this.meetingService.write(data).subscribe((resJson) => {\r\n      if (resJson.Result){\r\n        this.nativeService.showToast(\"添加成功\", 888);\r\n      }else{\r\n        this.nativeService.showToast(resJson.Data, 888);\r\n      }\r\n    });\r\n  }\r\n\r\n  addAffix() {\r\n    this.fileService.uploadAffix(1).subscribe((data) => {\r\n      let resJson = JSON.parse(data.response);\r\n      if (data.responseCode === 200){\r\n        this.writeForm.patchValue({'Affix': resJson.Data[0].OldName});\r\n        this.FileNewName = resJson.Data[0].NewName;\r\n      }else{\r\n        this.nativeService.showToast(resJson.Data, 800);\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  checkPeople(myEvent) {\r\n    let popover = this.popoverCtrl.create(\"ContactsPopoverPage\",\r\n        { addressee: this.writeForm.get(\"Person\").value, addresseeIds: this.PersonId });\r\n    popover.present({\r\n        ev: myEvent\r\n    });\r\n    popover.onDidDismiss(data => {\r\n        if (!!data) {\r\n            this.PersonId = data.addresseeIds;                \r\n            this.writeForm.patchValue({'Person': data.addressee});\r\n        }\r\n\r\n    });\r\n}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/meeting/meeting-write/meeting-write.ts"],"sourceRoot":""}