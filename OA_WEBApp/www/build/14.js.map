{"version":3,"sources":["../../src/pages/account/account.module.ts","../../src/model/UserInfo.ts","../../src/pages/account/account.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { Account } from './account';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        Account,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(Account),\r\n    ],\r\n    exports: [\r\n        Account,\r\n    ]\r\n})\r\nexport class AccountModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.module.ts","export class UserInfo {\r\n    Uid: string; // 用户id\r\n    Pwd: string; // 用户密码\r\n    Name: string; // 用户名称\r\n    Company: string; // 公司所属\r\n    Dept: string; // 部门\r\n    Duty: string; // 职责\r\n    InDate: string; // 入职日期\r\n    Sex: string; // 性别\r\n    BirthDate: string; // 生日\r\n    Mobile: string; // 移动电话\r\n    Status: string; // 账号状态\r\n    SDate: string; // 账号有效期-开始时间\r\n    EDate: string; // 账号有效期-结束时间\r\n    UserTp: string; // 用户类型\r\n    InlinePhone: string; // 内部电话\r\n    Mail: string; // 邮箱\r\n    WorkPhone: string; // 办公电话\r\n    RoleName: string; // 角色名称\r\n    Token: string; // 角色权限\r\n    RoleAuthority: string; // 角色权限\r\n    photo: string; // 照片暂无\r\n    \r\n    // cjr: string; // 创建人\r\n    // Cjsj: string; // 创建时间\r\n    // lasttime: string; // 上次登录时间\r\n    // ui_bgdh: string; // 办公电话\r\n    // ui_comm: string; // 备注\r\n    // ui_csrq: string; // --出生日期\r\n    // ui_czdh: string; // --内线电话\r\n    // ui_desc: string; // --用户姓名\r\n    // ui_edate: string; // 有效结束日期\r\n    // ui_id: string; // 编号\r\n    // ui_lx: string; // --用户类型\r\n    // ui_mail: string; // 邮箱\r\n    // ui_pwd: string; // 密码\r\n    // ui_role: string; // 角色\r\n    // ui_rzrq: string; // 入职日期\r\n    // ui_sdate: string; // 有效开始日期\r\n    // ui_sex: string; // 性别\r\n    // ui_ssbm: string; // 部门\r\n    // ui_ssgs: string; // -所属子公司\r\n    // ui_status: string; // 用户状态\r\n    // ui_yddx: string; // 移动电话\r\n    // ui_zw: string; // 职务\r\n    // photo: string; // 照片暂无\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/UserInfo.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events, ModalController, ActionSheetController } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\n\n// import { AccountEdit } from '../account/account-edit/account-edit';\n// import { AccountPasswordedit } from '../account/account-passwordedit/account-passwordedit';\n// import { AboutusPage } from '../account/aboutus/aboutus';\n\n\nimport { UserInfo } from \"../../model/UserInfo\";\nimport { GlobalData } from \"../../providers/GlobalData\";\n// import { LoginPage } from \"../login/login\";\n\nimport { NativeService } from '../../providers/NativeService';\n\nimport { FileService } from \"../../providers/FileService\";\nimport { FileObj } from \"../../model/FileObj\";\nimport { FILE_SERVE_URL } from \"../../providers/Constants\";\nimport { Utils } from \"../../providers/Utils\";\n\n\n\n/**\n * Generated class for the Account page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n    selector: 'page-account',\n    templateUrl: 'account.html',\n})\n\nexport class Account {\n    userInfo: UserInfo = new UserInfo();\n    isChange: boolean = false; // 头像是否改变标识\n    // avatarPath: string;\n    imageBase64: string;\n\n    constructor(public navCtrl: NavController,\n                public navParams: NavParams,\n                private storage: Storage,\n                private globalData: GlobalData,\n                private events: Events,\n                private modalCtrl: ModalController,\n                private actionSheetCtrl: ActionSheetController,\n                private fileService: FileService,\n                public nativeService: NativeService) {\n        this.userInfo.photo = \"assets/img/ionic.png\";\n        this.storage.get('UserInfo').then((userInfo: UserInfo) => {\n            if (userInfo) {\n                userInfo.photo = userInfo.photo ? userInfo.photo : this.userInfo.photo;\n                this.userInfo = userInfo;\n                this.events.publish('user:login', userInfo);\n                this.globalData.Uid = userInfo.Uid;\n                this.globalData.Name = userInfo.Name;\n                // this.globalData.token = userInfo.token;\n            } else {\n                let modal = this.modalCtrl.create(\"LoginPage\");\n                modal.present();\n                modal.onDidDismiss(data => {\n                    data && console.log(data);\n                });\n            }\n        });\n    }\n\n    ionViewDidLoad() {\n        console.log('ionViewDidLoad Account');\n    }\n\n    edit() {\n        this.navCtrl.push(\"AccountEdit\");\n    }\n\n    getAboutus() {\n        this.navCtrl.push(\"AboutusPage\");\n    }\n\n    pwdEdit() {\n        // this.navCtrl.push(AccountPasswordedit);\n        let modal = this.modalCtrl.create(\"AccountPasswordedit\");\n        modal.present();\n    }\n\n    changePhoto() {\n        let options = {\n            targetWidth: 400,\n            targetHeight: 400\n        };\n        let actionSheet = this.actionSheetCtrl.create({\n            title: '修改头像',\n            buttons: [\n                {\n                    text: '从相册选择图片',\n                    handler: () => {\n                        this.nativeService.getPictureByPhotoLibrary(options).subscribe(imageBase64 => {\n                            this.getPictureSuccess(imageBase64);\n                        });\n                    }\n                }, {\n                    text: '拍照',\n                    handler: () => {\n                        this.nativeService.getPictureByCamera(options).subscribe(imageBase64 => {\n                            this.getPictureSuccess(imageBase64);\n                        });\n                    }\n                }, {\n                    text: '取消',\n                    role: 'cancel',\n                    handler: () => {\n                        console.log('取消修改');\n                    }\n                }\n            ]\n        });\n        actionSheet.present();\n    }\n\n    private getPictureSuccess(imageBase64) {\n        this.isChange = true;\n        this.imageBase64 = <string>imageBase64;\n        this.userInfo.photo = 'data:image/jpg;base64,' + imageBase64;\n    }\n\n    save() {\n        if (this.isChange) {\n            let fileObj = <FileObj>{ 'base64': this.imageBase64 };\n            this.fileService.uploadByBase64(fileObj).subscribe(result => {// 上传图片到文件服务器\n                if (result) {\n                    let origPath = FILE_SERVE_URL + result[0].origPath;\n                    this.storage.get('UserInfo').then((userInfo: UserInfo) => {\n                        userInfo.photo = origPath;\n                        this.storage.set('UserInfo', userInfo);\n                    });\n                    // this.viewCtrl.dismiss({avatarPath: origPath});\n                    // 这里需要保存avatar字段到用户表\n                }\n            });\n        } else {\n            this.userInfo.photo = this.storage.get('UserInfo')[\"photo\"];\n        }\n    }\n\n    signOut(){\n        this.storage.clear(); // 清除缓存\n        Utils.sessionStorageClear(); // 清除数据缓存\n        let modal = this.modalCtrl.create(\"LoginPage\");\n        modal.present();\n        modal.onDidDismiss(data => {\n            data && console.log(data);\n        });\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.ts"],"sourceRoot":""}