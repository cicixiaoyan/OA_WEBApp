{"version":3,"sources":["../../src/pages/account/account-edit/account-edit.module.ts","../../src/model/UserInfo.ts","../../src/pages/account/account-edit/account-edit.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACH;AAa7C;IAAA;IAAiC,CAAC;IAArB,iBAAiB;QAX7B,uEAAQ,CAAC;YACN,YAAY,EAAE;gBACV,kEAAW;aACd;YACD,OAAO,EAAE;gBACL,sEAAe,CAAC,QAAQ,CAAC,kEAAW,CAAC;aACxC;YACD,OAAO,EAAE;gBACL,kEAAW;aACd;SACJ,CAAC;OACW,iBAAiB,CAAI;IAAD,wBAAC;CAAA;AAAJ;;;;;;;;;ACf9B;AAAA;IAAA;IA8CA,CAAC;IAAD,eAAC;AAAD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;AC9CyC;AACuD;AAC9C;AACiB;AAC3B;AACzC,iDAAiD;AACY;AAC7D;;;;;GAKG;AAMH;IAMI,qBAAmB,OAAsB,EACtB,SAAoB,EACnB,eAAsC,EACtC,OAAgB,EAChB,WAAwB,EACxB,SAA0B,EAC1B,WAAwB;QANzB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,oBAAe,GAAf,eAAe,CAAuB;QACtC,YAAO,GAAP,OAAO,CAAS;QAChB,gBAAW,GAAX,WAAW,CAAa;QACxB,cAAS,GAAT,SAAS,CAAiB;QAC1B,gBAAW,GAAX,WAAW,CAAa;QAV5C,aAAQ,GAAa,IAAI,iEAAQ,EAAE,CAAC;QAEpC,cAAS,GAAY,KAAK,CAAC;QAUvB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YACnC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC,kEAAU,CAAC,QAAQ,EAAE,kEAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5D,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,kEAAU,CAAC,QAAQ,EAAE,kEAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1D,SAAS,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;YACnB,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,kEAAU,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,kEAAU,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC;YACpE,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,kEAAU,CAAC,KAAK,CAAC,CAAC;YAChC,SAAS,EAAE,CAAC,IAAI,EAAE,CAAC,kEAAU,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC;YAC7C,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC,kEAAU,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC;SAClD,CAAC,CAAC;QAEH,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAED,gCAAU,GAAV;QAAA,iBAgBC;QAfG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YACvC,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAC;gBACV,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YAC7B,CAAC;YAAA,IAAI,EAAC;gBACF,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;gBAC/C,KAAK,CAAC,OAAO,EAAE,CAAC;gBAChB,KAAK,CAAC,YAAY,CAAC,cAAI;oBACnB,IAAI,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBAC9B,CAAC,CAAC,CAAC;YACP,CAAC;QACL,CAAC,CAAC,CAAC;QAGH,0CAA0C;QAC1C,uCAAuC;IAC3C,CAAC;IAED,oCAAc,GAAd;QACI,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;IAC9C,CAAC;IAED,OAAO;IACP,8BAAQ,GAAR;QAAA,iBAyBC;QAxBG,IAAI,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAC1C,KAAK,EAAE,MAAM;YACb,OAAO,EAAE;gBACL;oBACI,IAAI,EAAE,GAAG;oBACT,IAAI,EAAE,aAAa;oBACnB,OAAO,EAAE;wBACL,KAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAG,CAAC;oBAC5B,CAAC;iBACJ,EAAE;oBACC,IAAI,EAAE,GAAG;oBACT,OAAO,EAAE;wBACL,KAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAG,CAAC;oBAC5B,CAAC;iBACJ,EAAE;oBACC,IAAI,EAAE,IAAI;oBACV,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;wBACL,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;oBACvB,CAAC;iBACJ;aACJ;SACJ,CAAC,CAAC;QACH,WAAW,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IAED,0BAAI,GAAJ,UAAK,KAAK;QAAV,iBAoBC;QAnBG,yBAAyB;QACzB,sBAAsB;QACtB,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,CAAC;QAC5C,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,yBAAyB,EAAE,KAAK,CAAC;aAC9D,GAAG,CAAC,kBAAQ,IAAI,eAAQ,CAAC,IAAI,EAAE,EAAf,CAAe,CAAC;aAChC,SAAS,CAAC,UAAC,OAAO;YACf,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,EAAC;gBAChB,KAAI,CAAC,WAAW,CAAC,aAAa,CAAC,SAAS,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;gBACxD,KAAI,CAAC,WAAW,CAAC,YAAY,CAAC,oBAAoB,EAAE,EAAC,EAAE,EAAE,KAAI,CAAC,WAAW,CAAC,UAAU,CAAC,GAAG,EAAC,CAAC;qBACzF,GAAG,CAAC,kBAAQ,IAAI,eAAQ,CAAC,IAAI,EAAE,EAAf,CAAe,CAAC,CAAC,SAAS,CAAC,UAAC,GAAG;oBAC5C,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,EAAC;wBACZ,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;wBACvC,KAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC;oBAC7B,CAAC;gBACL,CAAC,CAAC,CAAC;YACP,CAAC;YAAA,IAAI,EAAC;gBACF,KAAI,CAAC,WAAW,CAAC,aAAa,CAAC,SAAS,CAAC,UAAU,GAAG,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;YAC7E,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,4BAAM,GAAN;QACI,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;IACvB,CAAC;IArGQ,WAAW;QAJvB,wEAAS,CAAC;YACP,QAAQ,EAAE,mBAAmB;WACG;SACnC,CAAC;6EAO2C;YACX,4EAAS;YACF,gEAAqB;YAC7B,2EAAO;YACH,sEAAW;YACb,qEAAe;YACb,QAAW;OAZnC,WAAW,CAwGvB;IAAD,CAAC;AAAA;SAxGY,WAAW,oB","file":"42.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AccountEdit } from './account-edit';\n\n@NgModule({\n    declarations: [\n        AccountEdit,\n    ],\n    imports: [\n        IonicPageModule.forChild(AccountEdit),\n    ],\n    exports: [\n        AccountEdit\n    ]\n})\nexport class AccountEditModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account-edit/account-edit.module.ts","export class UserInfo {\n    Uid: string; // 用户id\n    Pwd: string; // 用户密码\n    Name: string; // 用户名称\n    Company: string; // 公司所属\n    Dept: string; // 部门\n    Duty: string; // 职责\n    InDate: string; // 入职日期\n    Sex: string; // 性别\n    BirthDate: string; // 生日\n    Mobile: string; // 移动电话\n    Status: string; // 账号状态\n    SDate: string; // 账号有效期-开始时间\n    EDate: string; // 账号有效期-结束时间\n    UserTp: string; // 用户类型\n    InlinePhone: string; // 内部电话\n    Mail: string; // 邮箱\n    WorkPhone: string; // 办公电话\n    RoleName: string; // 角色名称\n    Token: string; // 角色权限\n    RoleAuthority: string; // 角色权限\n    photo: string; // 照片暂无\n    \n    // cjr: string; // 创建人\n    // Cjsj: string; // 创建时间\n    // lasttime: string; // 上次登录时间\n    // ui_bgdh: string; // 办公电话\n    // ui_comm: string; // 备注\n    // ui_csrq: string; // --出生日期\n    // ui_czdh: string; // --内线电话\n    // ui_desc: string; // --用户姓名\n    // ui_edate: string; // 有效结束日期\n    // ui_id: string; // 编号\n    // ui_lx: string; // --用户类型\n    // ui_mail: string; // 邮箱\n    // ui_pwd: string; // 密码\n    // ui_role: string; // 角色\n    // ui_rzrq: string; // 入职日期\n    // ui_sdate: string; // 有效开始日期\n    // ui_sex: string; // 性别\n    // ui_ssbm: string; // 部门\n    // ui_ssgs: string; // -所属子公司\n    // ui_status: string; // 用户状态\n    // ui_yddx: string; // 移动电话\n    // ui_zw: string; // 职务\n    // photo: string; // 照片暂无\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/UserInfo.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ActionSheetController, ModalController } from 'ionic-angular';\r\nimport { UserInfo } from \"../../../model/UserInfo\";\r\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\r\nimport { Storage } from '@ionic/storage';\r\n// import { LoginPage } from \"../../login/login\";\r\nimport { HttpService } from '../../../providers/HttpService';\r\n/**\r\n * Generated class for the AccountEdit page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-account-edit',\r\n    templateUrl: 'account-edit.html',\r\n})\r\nexport class AccountEdit {\r\n\r\n    userInfo: UserInfo = new UserInfo();\r\n    editForm: any;\r\n    submitted: boolean = false;\r\n\r\n    constructor(public navCtrl: NavController,\r\n                public navParams: NavParams,\r\n                private actionSheetCtrl: ActionSheetController,\r\n                private storage: Storage,\r\n                private httpService: HttpService,\r\n                private modalCtrl: ModalController,\r\n                private formBuilder: FormBuilder) {\r\n\r\n        this.editForm = this.formBuilder.group({\r\n            InDate: ['', [Validators.required, Validators.minLength(4)]], // 第一个参数是默认值\r\n            Sex: ['男', [Validators.required, Validators.minLength(2)]],\r\n            BirthDate: ['', []],\r\n            Mobile: [null, [Validators.minLength(11), Validators.maxLength(11)]],\r\n            Mail: [null, [Validators.email]],\r\n            WorkPhone: [null, [Validators.maxLength(11)]],\r\n            InlinePhone: [null, [Validators.maxLength(11)]]\r\n        });\r\n\r\n        this.initialize();\r\n    }\r\n\r\n    initialize() {\r\n        this.storage.get(\"UserInfo\").then((UserInfo) => {\r\n            if (UserInfo){\r\n                this.userInfo = UserInfo;\r\n            }else{\r\n                let modal = this.modalCtrl.create(\"LoginPage\");\r\n                modal.present();\r\n                modal.onDidDismiss(data => {\r\n                    data && console.log(data);\r\n                });\r\n            }\r\n        });\r\n\r\n\r\n        // this.userInfo.BirthDate = \"1990-02-19\";\r\n        // this.userInfo.InDate = \"1990-02-19\";\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n        console.log('ionViewDidLoad AccountEdit');\r\n    }\r\n\r\n    // 性别选择\r\n    checkSex() {\r\n        let actionSheet = this.actionSheetCtrl.create({\r\n            title: '选择性别',\r\n            buttons: [\r\n                {\r\n                    text: '男',\r\n                    role: 'destructive',\r\n                    handler: () => {\r\n                        this.userInfo.Sex = \"男\";\r\n                    }\r\n                }, {\r\n                    text: '女',\r\n                    handler: () => {\r\n                        this.userInfo.Sex = \"女\";\r\n                    }\r\n                }, {\r\n                    text: '取消',\r\n                    role: 'cancel',\r\n                    handler: () => {\r\n                        console.log('已取消');\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        actionSheet.present();\r\n    }\r\n\r\n    edit(value) {\r\n        // this.submitted = true;\r\n        // console.log(value);\r\n        value.Uid = this.httpService.globalData.Uid;\r\n        this.httpService.postFormData(\"ashx/UserPersonMod.ashx\", value)\r\n        .map(responce => responce.json())\r\n        .subscribe((Resjson) => {\r\n            if (Resjson.Result){\r\n                this.httpService.nativeService.showToast(\"修改资料成功\", 800);\r\n                this.httpService.postFormData(\"ashx/UserInfo.ashx\", {id: this.httpService.globalData.Uid})\r\n                .map(responce => responce.json()).subscribe((res) => {\r\n                    if (res.Result){\r\n                        this.storage.set(\"UserInfo\", res.Date);\r\n                        this.userInfo = res.Data;\r\n                    }\r\n                });\r\n            }else{\r\n                this.httpService.nativeService.showToast(\"修改资料失败： \" + Resjson.Data, 800);\r\n            }\r\n        });\r\n    }\r\n\r\n    return(){\r\n        this.navCtrl.pop();\r\n    }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account-edit/account-edit.ts"],"sourceRoot":""}