{"version":3,"sources":["../../src/pages/home/backlog/backlog.module.ts","../../src/pages/home/backlog/backlogService.ts","../../src/pages/home/backlog/backlog.ts"],"names":[],"mappings":"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","file":"21.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { Backlog } from './backlog';\nimport { BacklogService } from \"./backlogService\";\n\n@NgModule({\n    declarations: [\n        Backlog,\n    ],\n    imports: [\n        IonicPageModule.forChild(Backlog),\n    ],\n    exports: [\n        Backlog\n    ],\n    providers: [BacklogService]\n})\nexport class BacklogModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/backlog/backlog.module.ts","import { Injectable } from '@angular/core';\nimport { Response } from \"@angular/http\";\nimport 'rxjs/add/operator/map';\n// import {Observable} from \"rxjs\";\nimport { HttpService } from \"../../../providers/HttpService\";\n\n@Injectable()\nexport class BacklogService {\n    Status: object = {\n        notdone: 0, // 未办理\n        done: 1 // 已办理\n    };\n\n    constructor(public httpService: HttpService) {\n    }\n\n    getNotDoneList(param?) { // uid, PageIndex, PageSize, Status\n        return this.httpService.postFormData('/ashx/TodoLs.ashx', param).map((res: Response) => res.json());\n    }\n\n    getDoneList(param?) {\n        return this.httpService.postFormData('/ashx/TodoLs.ashx', param).map((res: Response) => res.json());\n    }\n\n    getDone(param?) {// id\n        return this.httpService.postFormData('/ashx/TodoDetail.ashx', param).map((res: Response) => res.json());\n    }\n\n    getNotDone(param?) {// id\n        return this.httpService.postFormData('/ashx/TodoDetail.ashx', param).map((res: Response) => res.json());\n    }\n\n    TodoApprove(param?) {// ISPass\n        return this.httpService.postFormData('/ashx/TodoApprove.ashx', param).map((res: Response) => res.json());\n    }\n\n    //   getInboxList(param?):Observable<any>{\n    //       return this.httpService.postFormData(\"url\",param).map((res: Response) => res.json());\n    //   }\n\n    //   getOutboxList(param?):Observable<any> {\n    //     return this.httpService.postFormData(\"url\",param).map((res: Response) => res.json());\n    //   }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/backlog/backlogService.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, Refresher } from 'ionic-angular';\r\n\r\n// import { BacklogDetail } from './backlog-detail/backlog-detail';\r\nimport { BacklogService } from \"./backlogService\";\r\n/**\r\n * Generated class for the Backlog page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-backlog',\r\n    templateUrl: 'backlog.html',\r\n    providers: [BacklogService]\r\n})\r\nexport class Backlog {\r\n    work: string = \"notDone\";\r\n    nxPage: any = \"BacklogDetail\";\r\n    params: any;\r\n    items: any = [];\r\n    moredata: boolean = true;\r\n    data: any;\r\n    isEmpty: boolean = false;\r\n\r\n    constructor(public navCtrl: NavController,\r\n                public navParams: NavParams,\r\n                private backlogService: BacklogService) {\r\n        this.data = {\r\n            \"PageIndex\": 0,\r\n            \"PageSize\": 10,\r\n            \"Status\": this.backlogService.Status[\"notdone\"],\r\n            \"Uid\": this.backlogService.httpService.globalData.Uid\r\n         };\r\n        this.getNotDoneList(this.data);\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n        console.log('ionViewDidLoad Backlog');\r\n    }\r\n\r\n    doRefresh(refresher?: Refresher) {\r\n        // this.initializeItems();\r\n        this.moredata = true;\r\n        this.data.PageIndex = 0;\r\n        this.items = [];\r\n        if (this.work === \"notDone\") {\r\n            // ....\r\n            this.data.Status = this.backlogService.Status[\"notdone\"];\r\n            this.getNotDoneList(this.data);\r\n        } else {\r\n            // ...\r\n            this.data.Status = this.backlogService.Status[\"done\"];\r\n            this.getDoneList(this.data);\r\n        }\r\n        if (!!refresher) {\r\n            setTimeout(() => {\r\n                console.log('数据加载完成');\r\n                refresher.complete();\r\n            }, 1000);\r\n        }\r\n\r\n    }\r\n\r\n    doInfinite(): Promise<any> {\r\n        if (this.moredata) {\r\n            if (this.work === \"ontDone\") {\r\n                // ....\r\n                this.getNotDoneList(this.data);\r\n            } else {\r\n                // ...\r\n                this.getDoneList(this.data);\r\n            }\r\n        }\r\n\r\n        return new Promise((resolve) => {\r\n            setTimeout(() => {\r\n                resolve();\r\n            }, 500);\r\n        });\r\n    }\r\n\r\n    private getNotDoneList(data) {\r\n        this.backlogService.getNotDoneList(data).subscribe((resJson) => {\r\n            if (resJson.Result  && resJson.Data.length !== 0 && typeof(resJson.Data) !== \"string\" ){\r\n                console.log(\"1\");\r\n                this.isEmpty = false;\r\n                this.items = this.items.concat(resJson.Data);\r\n            } else {\r\n                console.log(\"2\");\r\n                this.moredata = false;\r\n                this.isEmpty = this.data.PageIndex === 0 ? true : false;\r\n            }\r\n        });\r\n    }\r\n\r\n    private getDoneList(data) {\r\n        this.backlogService.getDoneList(data).subscribe((resJson) => {\r\n            if (resJson.Result  && resJson.Data.length !== 0 && typeof(resJson.Data) !== \"string\"){\r\n                this.isEmpty = false;\r\n                this.items = this.items.concat(resJson.Data);\r\n            } else {\r\n                this.moredata = false;\r\n                this.isEmpty = this.data.PageIndex === 0 ? true : false;\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/backlog/backlog.ts"],"sourceRoot":""}