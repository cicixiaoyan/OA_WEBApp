<!--
  Generated template for the MeetingEditPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar>
        <ion-title>会议详情</ion-title>
    </ion-navbar>

</ion-header>


<ion-content>
    <form [formGroup]="writeForm" (ngSubmit)="save(writeForm.value)" [ngClass]="{'form-readonly': readOnly}">
        <div>
            <ion-list>
                <ion-item>
                    <ion-label>会议主题</ion-label>
                    <ion-input text-right formControlName="Title" placeholder="请输入"></ion-input>
                </ion-item>
                <div *ngIf="!writeForm.controls.Title.valid && (writeForm.controls.Title.touched || writeForm.controls.Title.dirty )" class="validation-failed">
                    <div *ngIf="writeForm.get('Title').errors.required">会议主题必填</div>
                    <div *ngIf="writeForm.get('Title').errors.minlength">最少输入2个字</div>
                    <div *ngIf="writeForm.get('Title').errors.maxlength">最多输入30个字</div>
                </div>

                <ion-item>
                    <ion-label>会议类型</ion-label>
                    <ion-select formControlName="TypeId" cancelText="取消" okText="确定" placeholder="请选择">
                        <ion-option *ngFor="let type of MeetTypeLs;let i = index" [value]="type.Id">{{type.Name}}</ion-option>
                        <!-- <ion-option value="2">类型2</ion-option> -->
                    </ion-select>
                </ion-item>
                <div *ngIf="!writeForm.controls.TypeId.valid && (writeForm.controls.TypeId.touched || writeForm.controls.TypeId.dirty )"
                    class="validation-failed">
                    会议类型必选
                </div>

                <ion-item>
                    <ion-label>召开地点</ion-label>
                    <ion-select formControlName="PlaceId" cancelText="取消" okText="确定" placeholder="请选择">
                        <ion-option *ngFor="let place of MeetPlaceLs;let i = index" [value]="place.Id">{{place.Name}}</ion-option>
                        <!-- <ion-option value="2">类型2</ion-option> -->
                    </ion-select>
                </ion-item>
                <div *ngIf="!writeForm.controls.PlaceId.valid && (writeForm.controls.PlaceId.touched || writeForm.controls.PlaceId.dirty )"
                    class="validation-failed">
                    召开地点必选
                </div>
                <ion-item>
                    <ion-label>主持人
                        <span class="optional">（选填）</span>
                    </ion-label>
                    <ion-input text-right type="text" formControlName="HostName" placeholder="请输入"></ion-input>
                </ion-item>
                <div *ngIf="!writeForm.controls.HostName.valid && (writeForm.controls.HostName.touched || writeForm.controls.HostName.dirty )"
                    class="validation-failed">
                    最多输入20个字
                </div>

                <ion-item>
                    <ion-label>参加部门
                        <span class="optional">（选填）</span>
                    </ion-label>
                    <ion-select formControlName="DeptId" multiple="true" cancelText="取消" okText="确定" placeholder="请选择">
                        <ion-option *ngFor="let dept of DeptLs;let i = index" [value]="dept.Id">{{dept.BmName}}</ion-option>
                    </ion-select>
                </ion-item>

                <ion-item>
                    <ion-label>开始时间</ion-label>
                    <ion-datetime placeholder="点击设置" cancelText="取消" doneText="确定" formControlName="StartDate" displayFormat="YYYY年MM月DD日 HH:mm"
                        pickerFormat="YYYY MM DD HH mm"></ion-datetime>
                </ion-item>
                <div *ngIf="!writeForm.controls.StartDate.valid && (writeForm.controls.StartDate.touched || writeForm.controls.StartDate.dirty )"
                    class="validation-failed">
                    开始时间必填
                </div>

                <ion-item>
                    <ion-label>结束时间</ion-label>
                    <ion-datetime placeholder="点击设置" cancelText="取消" doneText="确定" formControlName="EndDate" displayFormat="YYYY年MM月DD日 HH:mm"
                        pickerFormat="YYYY MM DD HH mm"></ion-datetime>
                </ion-item>
                <div *ngIf="!writeForm.controls.EndDate.valid && (writeForm.controls.EndDate.touched || writeForm.controls.EndDate.dirty )"
                    class="validation-failed">
                    结束时间必填
                </div>

                <ion-item>
                    <ion-label>参加人员</ion-label>
                    <ion-input text-right type="text" formControlName="PersonId" placeholder="点击添加"></ion-input>
                </ion-item>
                <div *ngIf="!writeForm.controls.PersonId.valid && (writeForm.controls.PersonId.touched || writeForm.controls.PersonId.dirty )"
                    class="validation-failed">
                    <div *ngIf="writeForm.get('PersonId').errors.required">参加人员必填</div>
                    <div *ngIf="writeForm.get('PersonId').errors.maxlength">最多输入180个字</div>
                </div>

                <ion-item>
                    <ion-label>出席范围
                        <span class="optional">（选填）</span>
                    </ion-label>
                    <ion-input text-right type="text" formControlName="Range" placeholder="请输入"></ion-input>
                </ion-item>
                <div *ngIf="!writeForm.controls.Range.valid && (writeForm.controls.Range.touched || writeForm.controls.Range.dirty )" class="validation-failed">
                    最多输入180个字
                </div>

                <ion-item>
                    <ion-label>简要说明
                        <span class="optional">（选填）</span>
                    </ion-label>
                    <ion-input text-right type="text" formControlName="Detail" placeholder="请输入"></ion-input>
                </ion-item>
                <div *ngIf="!writeForm.controls.Detail.valid && (writeForm.controls.Detail.touched || writeForm.controls.Detail.dirty )"
                    class="validation-failed">
                    最多输入180个字
                </div>

                <ion-item>
                    <ion-label>附件
                        <span class="optional">（选填）</span>
                    </ion-label>
                    <ion-input type="text" formControlName="FileOldName" (click)="addAffix()" placeholder="点击添加"></ion-input>
                </ion-item>
            </ion-list>
            <div padding text-center>
                <button *ngIf="!readOnly" ion-button type="submit" color="danger" [disabled]="!writeForm.valid">保存</button>
                <button ion-button clear small navPop>返回</button>
            </div>
        </div>
    </form>
</ion-content>
