{"version":3,"sources":["../../src/pages/meeting/meeting-write/meeting-write.module.ts","../../src/pages/meeting/meeting_service.ts","../../src/pages/meeting/meeting-write/meeting-write.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MeetingWritePage } from './meeting-write';\nimport { MeetingService } from '../meeting_service';\n\n@NgModule({\n  declarations: [\n    MeetingWritePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MeetingWritePage),\n  ],\n  exports: [MeetingWritePage],\n  providers: [MeetingService] \n})\nexport class MeetingWritePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/meeting/meeting-write/meeting-write.module.ts","import { Injectable } from '@angular/core';\nimport { Response } from \"@angular/http\";\nimport 'rxjs/add/operator/map';\nimport { Observable } from 'rxjs/Observable';\nimport { HttpService } from \"../../providers/HttpService\";\n\n@Injectable()\nexport class MeetingService {\n    meetingStatus: object = {\n        Drafting: \"起草中\", // 起草中\n        Delivered: \"送审中\", // 送审中\n        Approved: \"已审批\", // 已审批\n        HasBeenReturned: \"已退回\", // 已退回\n        completed: \"已完成\", // 已完成\n    };\n\n    constructor(public httpService: HttpService) {\n    }\n\n    getList(param?): Observable<any>{\n        return this.httpService.postFormData(\"ashx/MeetLs.ashx\", param).map((res: Response) => res.json());\n    }\n\n    write(param): Observable<any>{\n        return this.httpService.postFormData(\"ashx/MeetAdd.ashx\", param).map((res: Response) => res.json());\n    }\n\n    read(param): Observable<any> {\n        return this.httpService.postFormData(\"ashx/MeetDetail.ashx\", param).map((res: Response) => res.json());\n    }\n\n    mod(param): Observable<any>  {\n        return this.httpService.postFormData(\"ashx/MeetMod.ashx\", param).map((res: Response) => res.json());\n    }\n\n    MeetPlaceLs(): Observable<any>{\n        return this.httpService.postFormData(\"ashx/MeetPlaceLs.ashx\", {}).map((res: Response) => res.json());\n    }\n\n    MeetTypeLs(): Observable<any>{\n        return this.httpService.postFormData(\"ashx/MeetTypeLs.ashx\", {}).map((res: Response) => res.json());\n    }\n\n    GetMeetingPlaceAndType(): Observable<any>{\n        let MeetPlaceLs = this.httpService.postFormData(\"ashx/MeetPlaceLs.ashx\", {}).map((res: Response) => res.json());\n        let MeetTypeLs = this.httpService.postFormData(\"ashx/MeetTypeLs.ashx\", {}).map((res: Response) => res.json());\n        return Observable.forkJoin([MeetPlaceLs, MeetTypeLs]);\n    }\n\n    GetDeptLs(): Observable<any>{\n        return this.httpService.postFormData(\"ashx/BmLs.ashx\", {}).map((res: Response) => res.json());\n    }\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/meeting/meeting_service.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { IonicPage, NavParams, NavController, PopoverController, ViewController } from 'ionic-angular';\n\nimport { GlobalData } from '../../../providers/GlobalData';\nimport { NativeService } from '../../../providers/NativeService';\nimport { FileObj } from \"../../../model/FileObj\";\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\nimport { FileService } from '../../../providers/FileService';\nimport { MeetingService } from '../meeting_service';\n\n/**\n * Generated class for the MeetingWritePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-meeting-write',\n  templateUrl: 'meeting-write.html',\n})\nexport class MeetingWritePage {\n  writeForm: FormGroup;\n  FileNewName: string = \"\"; // 附件名称\n  MeetPlaceLs = [];\n  MeetTypeLs = [];\n  DeptLs = [];\n  PersonId: string = \"\";\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              private fileService: FileService,\n              private formBuilder: FormBuilder,\n              private globalData: GlobalData,\n              private popoverCtrl: PopoverController,\n              private nativeService: NativeService,\n              private meetingService: MeetingService) {\n    this.meetingService.MeetPlaceLs().subscribe((resJson) => {\n      if (resJson.Result)  this.MeetPlaceLs = resJson.Data;\n    });\n\n    this.meetingService.MeetTypeLs().subscribe((resJson) => {\n      if (resJson.Result)  this.MeetTypeLs = resJson.Data;\n    });\n\n    this.meetingService.GetDeptLs().subscribe((resJson) => {\n      if (resJson.Result)  this.DeptLs = resJson.Data;\n    });\n\n    this.writeForm = this.formBuilder.group({\n        Title: ['', [Validators.required, Validators.maxLength(30), Validators.maxLength(2)]], // 第一个参数是默认值\n        TypeId: [\"\", [Validators.required]],\n        PlaceId: [\"\", [ Validators.required]],\n        StartDate: [\"\", [ Validators.required]],\n        EndDate: [\"\", [Validators.required]],\n        Person: [\"\", [Validators.maxLength(180), Validators.required]],\n        DeptId: [\"\", []],\n        HostName: [\"\", [Validators.maxLength(20)]],\n        Range: [\"\", [Validators.maxLength(180)]],\n        Detail: [\"\", [Validators.maxLength(180)]],\n        FileOldName: [\"\", [Validators.maxLength(180)]],\n    });\n\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad MeetingWritePage');\n  }\n  sent(data){\n    data.Person = null;\n    data.Uid = this.globalData.Uid;\n    data.FileNewName = this.FileNewName;\n    data.PersonId = this.PersonId;\n    this.meetingService.write(data).subscribe((resJson) => {\n      if (resJson.Result){\n        this.nativeService.showToast(\"添加成功\", 888);\n      }else{\n        this.nativeService.showToast(resJson.Data, 888);\n      }\n    });\n  }\n\n  addAffix() {\n    this.fileService.uploadAffix(1).subscribe((data) => {\n      let resJson = JSON.parse(data.response);\n      if (data.responseCode === 200){\n        this.writeForm.patchValue({'Affix': resJson.Data[0].OldName});\n        this.FileNewName = resJson.Data[0].NewName;\n      }else{\n        this.nativeService.showToast(resJson.Data, 800);\n      }\n\n    });\n  }\n\n  checkPeople(myEvent) {\n    let popover = this.popoverCtrl.create(\"ContactsPopoverPage\",\n        { addressee: this.writeForm.get(\"Person\").value, addresseeIds: this.PersonId });\n    popover.present({\n        ev: myEvent\n    });\n    popover.onDidDismiss(data => {\n        if (!!data) {\n            this.PersonId = data.addresseeIds;                \n            this.writeForm.patchValue({'Person': data.addressee});\n        }\n\n    });\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/meeting/meeting-write/meeting-write.ts"],"sourceRoot":""}