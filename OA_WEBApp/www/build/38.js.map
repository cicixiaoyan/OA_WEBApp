{"version":3,"sources":["../../src/pages/login/find-password/find-password.module.ts","../../src/pages/login/login.module.ts","../../src/pages/login/find-password/find-password.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"38.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { FindPassword } from './find-password';\r\nimport { LoginService } from '../LoginService';\r\n@NgModule({\r\n    declarations: [\r\n        FindPassword,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(FindPassword),\r\n    ],\r\n    exports: [\r\n        FindPassword\r\n    ],\r\n    providers: [LoginService]\r\n})\r\nexport class FindPasswordModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/find-password/find-password.module.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\nimport { FindPasswordModule } from './find-password/find-password.module';\nimport { LoginService } from './LoginService';\n\n@NgModule({\n    declarations: [\n        LoginPage\n    ],\n    imports: [\n        IonicPageModule.forChild(LoginPage),\n        FindPasswordModule\n    ],\n    exports: [\n        LoginPage\n    ],\n    providers: [LoginService]\n})\nexport class LoginModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, ViewController } from 'ionic-angular';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\n// import { LoginPage } from '../login';\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-find-password',\r\n    templateUrl: 'find-password.html'\r\n})\r\nexport class FindPassword {\r\n    findPasswordForm: any;\r\n\r\n    constructor(private navCtrl: NavController,\r\n                private viewCtrl: ViewController,\r\n                private formBuilder: FormBuilder) {\r\n        this.findPasswordForm = this.formBuilder.group({\r\n            phone: [, [Validators.required, Validators.minLength(11), Validators.pattern('1[0-9]{10}')]],\r\n            verificationCode: [, [Validators.required, Validators.minLength(6), Validators.pattern('[0-9]{6}')]],\r\n            newPassword: [, [Validators.required, Validators.minLength(6)]]\r\n        });\r\n    }\r\n\r\n    confirm() {\r\n        this.navCtrl.setRoot(\"LoginPage\");\r\n    }\r\n\r\n    dismiss() {\r\n        this.viewCtrl.dismiss();\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/find-password/find-password.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, ModalController, ViewController, Platform, AlertController, Events } from 'ionic-angular';\r\nimport { Storage } from '@ionic/storage';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\n\r\nimport { LoginService } from './LoginService';\r\nimport { UserInfo } from \"../../model/UserInfo\";\r\n\r\n// import { FindPassword } from './find-password/find-password';\r\n// import {UserInfo} from \"../../model/UserInfo\";\r\nimport { GlobalData } from \"../../providers/GlobalData\";\r\n\r\n// import { TabsPage } from '../tabs/tabs';\r\nimport { HttpService } from \"../../providers/HttpService\";\r\n@IonicPage()\r\n\r\n@Component({\r\n    selector: 'page-login',\r\n    templateUrl: 'login.html',\r\n    providers: [LoginService]\r\n})\r\nexport class LoginPage {\r\n    userInfo: any;\r\n    submitted: boolean = false;\r\n    canLeave: boolean = false;\r\n    loginForm: any;\r\n\r\n    constructor(private viewCtrl: ViewController,\r\n                private events: Events,\r\n                private formBuilder: FormBuilder,\r\n                private storage: Storage,\r\n                private modalCtrl: ModalController,\r\n                private platform: Platform,\r\n                private alertCtrl: AlertController,\r\n                private globalData: GlobalData,\r\n                private loginService: LoginService,\r\n                private httpService: HttpService\r\n    ) {\r\n\r\n        this.loginForm = this.formBuilder.group({\r\n            UserName: ['admin', [Validators.required, Validators.minLength(4)]], // 第一个参数是默认值\r\n            UserPass: ['123', [Validators.required, Validators.minLength(2)]]\r\n        });\r\n    }\r\n\r\n    ionViewWillEnter() {\r\n        this.canLeave = false;\r\n        this.storage.get('UserInfo').then(userInfo => {\r\n            this.userInfo = userInfo && userInfo.user ? userInfo.user : null;\r\n        });\r\n    }\r\n\r\n    ionViewCanLeave(): boolean {\r\n        let bool = !!this.userInfo;\r\n        if (this.canLeave || bool) {\r\n            return true;\r\n        } else {\r\n            this.alertCtrl.create({\r\n                title: '确认退出软件？',\r\n                buttons: [{ text: '取消' },\r\n                {\r\n                    text: '确定',\r\n                    handler: () => {\r\n                        this.platform.exitApp();\r\n                    }\r\n                }\r\n                ]\r\n            }).present();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    login(user) {\r\n        this.submitted = true;\r\n        // this.httpService.postFormData(\"ashx/Login.ashx/LoginInfo\",user)\r\n        //  .map(responce => responce.json())\r\n        this.loginService.login(user).subscribe((userInfo) => {\r\n            console.log(userInfo);\r\n            this.submitted = false;\r\n            // userInfo.token = 'xx122a9Wf';//从后台获取token,暂时写死\r\n            this.userInfo = userInfo.Data;\r\n            this.globalData.Uid = userInfo.Data.Uid;\r\n            this.globalData.Name = userInfo.Data.Name;\r\n            this.globalData.token = userInfo.Data.Token;\r\n            // alert(this.globalData.token);\r\n            this.storage.set('UserInfo', userInfo.Data);\r\n            this.storage.set('LoginInfo', user);\r\n            // alert(this.storage.get('UserInfo'));\r\n            this.events.publish('user:login', userInfo);\r\n            this.viewCtrl.dismiss(userInfo.Data);\r\n        });\r\n    }\r\n\r\n    findPassword() {\r\n        this.canLeave = true;\r\n        let modal = this.modalCtrl.create(\"FindPassword\");\r\n        modal.present();\r\n        modal.onDidDismiss(data => {\r\n            this.canLeave = false;\r\n        });\r\n\r\n    }\r\n\r\n    dismiss() {\r\n        this.viewCtrl.dismiss();\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}