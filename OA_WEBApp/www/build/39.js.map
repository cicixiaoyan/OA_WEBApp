{"version":3,"sources":["../../src/pages/staff-popover/staff-popover.module.ts","../../src/pages/staff-popover/staff-popover.ts"],"names":[],"mappings":"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","file":"39.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { StaffPopoverPage } from './staff-popover';\n\n@NgModule({\n  declarations: [\n    StaffPopoverPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(StaffPopoverPage),\n  ],\n})\nexport class StaffPopoverPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/staff-popover/staff-popover.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { Response } from \"@angular/http\";\nimport 'rxjs/add/operator/map';\nimport { Observable } from 'rxjs/Observable';\nimport { HttpService } from '../../providers/HttpService';\n\n/**\n * Generated class for the StaffPopoverPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-staff-popover',\n  templateUrl: 'staff-popover.html',\n})\nexport class StaffPopoverPage {\n\n\n    dept: string;\n    deptItems: any = [];\n    items: any = [];\n    haveAffix: boolean = false;\n    Uid: string;\n    name: string;\n    Result: Object = {}; // 最终返回结果\n\n    constructor(private navParams: NavParams,\n                public viewCtrl: ViewController,\n                public storage: Storage,\n                public httpService: HttpService) {\n          this.Uid = this.navParams.get(\"Uid\");\n          this.initializeItems();\n    }\n\n    initializeItems() {\n      this.httpService.postFormData(\"ashx/BmLs.ashx\", {})\n      .map((res: Response) => res.json())\n      .subscribe((resJson) => {\n          if (resJson.Result){\n              this.deptItems = resJson.Data;\n          }\n      });\n      this.search();\n    }\n\n    getItems(ev) {\n        // Reset items back to all of the items\n        this.initializeItems();\n\n        // set val to the value of the ev target\n        let val = ev.target.value;\n        this.name = val;\n        // if the value is an empty string don't filter the items\n        // if (val && val.trim() != '') {\n        //   this.items = this.items.filter((item) => {\n        //     return (item.toLowerCase().indexOf(val.toLowerCase()) > -1);\n        //   });\n        // }\n    }\n\n    getRecipientsByDept(id?){\n        let data = !!id ? {DeptId: id} : {};\n        this.httpService.postFormData(\"ashx/UserSheet.ashx\", data)\n        .map((res: Response) => res.json())\n        .subscribe((result) => {\n            console.log(result);\n            // if (result.Result){\n            //     const idArr = this.addresseeIds.split(\",\");\n            //\n            //     this.items = result.Data.map(function (value, index) {\n            //         for (let i in idArr) {\n            //             if (idArr[i] !== value.Uid) {\n            //                 Object.assign(value, { checked: false });\n            //             } else {\n            //                 return Object.assign(value, { checked: true });\n            //\n            //             }\n            //         }\n            //         return value;\n            //\n            //     });\n            // }\n        });\n    }\n\n    search() {\n        console.log('change');\n        let that = this;\n        let data = [\n          {\n            \"Uid\": '1',\n            'Name': '张三',\n            'Sex': '男',\n            'IDC': '511324198910121111',\n            'Dept': '部门名称1',\n            'Duty': '职务1',\n            \"JobNumber\": '123456'\n          },\n          {\n            \"Uid\": '2',\n            'Name': '李四',\n            'Sex': '男',\n            'IDC': '511324198910121111',\n            'Dept': '部门名称2',\n            'Duty': '职务2',\n            \"JobNumber\": '123455'\n          },\n          {\n            \"Uid\": '4',\n            'Name': '李四',\n            'Sex': '男',\n            'IDC': '511324198910121111',\n            'Dept': '部门名称2',\n            'Duty': '职务2',\n            \"JobNumber\": '123455'\n          },\n          {\n            \"Uid\": '5',\n            'Name': '李四',\n            'Sex': '男',\n            'IDC': '511324198910121111',\n            'Dept': '部门名称2',\n            'Duty': '职务2',\n            \"JobNumber\": '123455'\n          },\n          {\n            \"Uid\": '6',\n            'Name': '李四',\n            'Sex': '男',\n            'IDC': '511324198910121111',\n            'Dept': '部门名称2',\n            'Duty': '职务2',\n            \"JobNumber\": '123455'\n          },\n          {\n            \"Uid\": '7',\n            'Name': '李四',\n            'Sex': '男',\n            'IDC': '511324198910121111',\n            'Dept': '部门名称2',\n            'Duty': '职务2',\n            \"JobNumber\": '123455'\n          },\n          {\n            \"Uid\": '3',\n            'Name': '王五',\n            'Sex': '男',\n            'IDC': '511324198910121111',\n            'Dept': '部门名称3',\n            'Duty': '职务3',\n            \"JobNumber\": '123454'\n          }\n        ];\n        this.items = data.map(function (value, index) {\n           if (value.Uid == that.Uid) Object.assign(value, { checked: true });\n           else Object.assign(value, { checked: false });\n           return value;\n        });\n\n        // let data = (this.name !== \"\") ? {name: name} : {};\n        // this.httpService.postFormData(\"ashx/UserSheet.ashx\", data)\n        // .map((res: Response) => res.json())\n        // .subscribe((result) => {\n        //     console.log(result);\n        //     if (result.Result){\n        //         const idArr = this.addresseeIds.split(\",\");\n        //\n        //         this.items = result.Data.map(function (value, index) {\n        //             for (let i in idArr) {\n        //                 if (idArr[i] !== value.Uid) {\n        //                     Object.assign(value, { checked: false });\n        //                 } else {\n        //                     return Object.assign(value, { checked: true });\n        //\n        //                 }\n        //             }\n        //             return value;\n        //\n        //         });\n        //     }\n        // });\n    }\n\n    checkPeople(Index: number) { // 单选\n        this.items.forEach((value, index) => {\n            if (Index === index) value.checked = true;\n            else value.checked = false;\n        });\n    }\n\n    confirm() {\n        console.log(confirm);\n\n        for (let value of this.items) {\n            if (value.checked) {\n                this.Result = value;\n            }\n        }\n        this.viewCtrl.dismiss(this.Result);\n    }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/staff-popover/staff-popover.ts"],"sourceRoot":""}