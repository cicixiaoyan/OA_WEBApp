{"version":3,"sources":["../../src/pages/account/account-edit/account-edit.module.ts","../../src/model/UserInfo.ts","../../src/pages/account/account-edit/account-edit.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AccountEdit } from './account-edit';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AccountEdit,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(AccountEdit),\r\n    ],\r\n    exports: [\r\n        AccountEdit\r\n    ]\r\n})\r\nexport class AccountEditModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account-edit/account-edit.module.ts","export class UserInfo {\r\n    Uid: string; // 用户id\r\n    Pwd: string; // 用户密码\r\n    Name: string; // 用户名称\r\n    Company: string; // 公司所属\r\n    Dept: string; // 部门\r\n    Duty: string; // 职责\r\n    InDate: string; // 入职日期\r\n    Sex: string; // 性别\r\n    BirthDate: string; // 生日\r\n    Mobile: string; // 移动电话\r\n    Status: string; // 账号状态\r\n    SDate: string; // 账号有效期-开始时间\r\n    EDate: string; // 账号有效期-结束时间\r\n    UserTp: string; // 用户类型\r\n    InlinePhone: string; // 内部电话\r\n    Mail: string; // 邮箱\r\n    WorkPhone: string; // 办公电话\r\n    RoleName: string; // 角色名称\r\n    Token: string; // 角色权限\r\n    RoleAuthority: string; // 角色权限\r\n    photo: string; // 照片暂无\r\n    \r\n    // cjr: string; // 创建人\r\n    // Cjsj: string; // 创建时间\r\n    // lasttime: string; // 上次登录时间\r\n    // ui_bgdh: string; // 办公电话\r\n    // ui_comm: string; // 备注\r\n    // ui_csrq: string; // --出生日期\r\n    // ui_czdh: string; // --内线电话\r\n    // ui_desc: string; // --用户姓名\r\n    // ui_edate: string; // 有效结束日期\r\n    // ui_id: string; // 编号\r\n    // ui_lx: string; // --用户类型\r\n    // ui_mail: string; // 邮箱\r\n    // ui_pwd: string; // 密码\r\n    // ui_role: string; // 角色\r\n    // ui_rzrq: string; // 入职日期\r\n    // ui_sdate: string; // 有效开始日期\r\n    // ui_sex: string; // 性别\r\n    // ui_ssbm: string; // 部门\r\n    // ui_ssgs: string; // -所属子公司\r\n    // ui_status: string; // 用户状态\r\n    // ui_yddx: string; // 移动电话\r\n    // ui_zw: string; // 职务\r\n    // photo: string; // 照片暂无\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/UserInfo.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ActionSheetController, ModalController } from 'ionic-angular';\nimport { UserInfo } from \"../../../model/UserInfo\";\nimport { FormBuilder, Validators, FormGroup } from '@angular/forms';\nimport { Storage } from '@ionic/storage';\n// import { LoginPage } from \"../../login/login\";\nimport { HttpService } from '../../../providers/HttpService';\n/**\n * Generated class for the AccountEdit page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n    selector: 'page-account-edit',\n    templateUrl: 'account-edit.html',\n})\nexport class AccountEdit {\n\n    userInfo: UserInfo = new UserInfo();\n    editForm: any;\n    submitted: boolean = false;\n\n    constructor(public navCtrl: NavController,\n                public navParams: NavParams,\n                private actionSheetCtrl: ActionSheetController,\n                private storage: Storage,\n                private httpService: HttpService,\n                private modalCtrl: ModalController,\n                private formBuilder: FormBuilder) {\n\n        this.editForm = this.formBuilder.group({\n            InDate: ['', [Validators.required, Validators.minLength(4)]], // 第一个参数是默认值\n            Sex: ['男', [Validators.required, Validators.minLength(2)]],\n            BirthDate: ['', []],\n            Mobile: [null, [Validators.minLength(11), Validators.maxLength(11)]],\n            Mail: [null, [Validators.email]],\n            WorkPhone: [null, [Validators.maxLength(11)]],\n            InlinePhone: [null, [Validators.maxLength(11)]]\n        });\n\n        this.initialize();\n    }\n\n    initialize() {\n        this.storage.get(\"UserInfo\").then((UserInfo) => {\n            if (UserInfo){\n                this.userInfo = UserInfo;\n            }else{\n                let modal = this.modalCtrl.create(\"LoginPage\");\n                modal.present();\n                modal.onDidDismiss(data => {\n                    data && console.log(data);\n                });\n            }\n        });\n\n\n        // this.userInfo.BirthDate = \"1990-02-19\";\n        // this.userInfo.InDate = \"1990-02-19\";\n    }\n\n    ionViewDidLoad() {\n        console.log('ionViewDidLoad AccountEdit');\n    }\n\n    // 性别选择\n    checkSex() {\n        let actionSheet = this.actionSheetCtrl.create({\n            title: '选择性别',\n            buttons: [\n                {\n                    text: '男',\n                    role: 'destructive',\n                    handler: () => {\n                        this.userInfo.Sex = \"男\";\n                    }\n                }, {\n                    text: '女',\n                    handler: () => {\n                        this.userInfo.Sex = \"女\";\n                    }\n                }, {\n                    text: '取消',\n                    role: 'cancel',\n                    handler: () => {\n                        console.log('已取消');\n                    }\n                }\n            ]\n        });\n        actionSheet.present();\n    }\n\n    edit(value) {\n        // this.submitted = true;\n        // console.log(value);\n        value.Uid = this.httpService.globalData.Uid;\n        this.httpService.postFormData(\"ashx/UserPersonMod.ashx\", value)\n        .map(responce => responce.json())\n        .subscribe((Resjson) => {\n            if (Resjson.Result){\n                this.httpService.nativeService.showToast(\"修改资料成功\", 800);\n                this.httpService.postFormData(\"ashx/UserInfo.ashx\", {id: this.httpService.globalData.Uid})\n                .map(responce => responce.json()).subscribe((res) => {\n                    if (res.Result){\n                        this.storage.set(\"UserInfo\", res.Date);\n                        this.userInfo = res.Data;\n                    }\n                });\n            }else{\n                this.httpService.nativeService.showToast(\"修改资料失败： \" + Resjson.Data, 800);\n            }\n        });\n    }\n\n    return(){\n        this.navCtrl.pop();\n    }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account-edit/account-edit.ts"],"sourceRoot":""}